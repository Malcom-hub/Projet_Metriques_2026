<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Prévisions 7 jours — Paris</title>

  <script src="https://www.gstatic.com/charts/loader.js"></script>

  <style>
    body { font-family: Arial; margin: 30px; }
    #chart { width: 100%; height: 500px; }
  </style>
</head>

<body>
  <h1>Prévisions météo — 7 prochains jours</h1>
  <div id="chart"></div>

  <script>
    google.charts.load('current', { packages:['corechart'] });
    google.charts.setOnLoadCallback(init);

    async function init() {
      const res = await fetch('/paris-7j');
      const json = await res.json();

      const data = new google.visualization.DataTable();
      data.addColumn('string', 'Date');
      data.addColumn('number', 'Température max (°C)');
      data.addColumn('number', 'Température min (°C)');

      json.forEach(day => {
        data.addRow([
          day.date,
          day.temp_max,
          day.temp_min
        ]);
      });

      const options = {
        title: 'Températures prévues à Paris',
        legend: { position: 'bottom' },
        vAxis: { title: '°C' }
      };

      const chart = new google.visualization.ColumnChart(
        document.getElementById('chart')
      );

      chart.draw(data, options);
    }
  </script>
</body>
</html>
